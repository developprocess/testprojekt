<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Immobilien Portal</title>
    <style>
        body, html { 
            margin: 0; padding: 0; height: 100%; width: 100%; 
            overflow: hidden; background-color: #f8f9fa; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        }
        
        /* Container für das IFrame */
        .container { position: relative; width: 100%; height: 100%; }
        
        iframe { 
            border: none; width: 100%; height: 100%; 
            display: block; position: absolute; top: 0; left: 0;
        }

        /* Safari-Hinweis (wird nur angezeigt, wenn das IFrame blockiert wird) */
        #safari-fix {
            display: none; position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%); text-align: center;
            padding: 20px; width: 80%; max-width: 400px;
            background: white; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .btn {
            display: inline-block; margin-top: 15px; padding: 12px 24px;
            background-color: #007bff; color: white; text-decoration: none;
            border-radius: 6px; font-weight: bold;
        }
    </style>
</head>
<body>

    <div class="container">
        <iframe 
            id="app-frame"
            src="https://script.google.com/macros/s/AKfycbxY07NtUXzrE0y-zuideXsBRmj_XEnj5ULf9iYz5qKYwNV2J6HULK-erBulnhTTfxg/exec" 
            sandbox="allow-forms allow-scripts allow-same-origin allow-popups allow-modals"
            allow="geolocation; microphone; camera; storage-access">
        </iframe>

        <div id="safari-fix">
            <h3>Hinweis für Safari-Nutzer</h3>
            <p>Ihr Browser blockiert die Anzeige innerhalb der Seite.</p>
            <a href="https://script.google.com/macros/s/AKfycbxY07NtUXzrE0y-zuideXsBRmj_XEnj5ULf9iYz5qKYwNV2J6HULK-erBulnhTTfxg/exec" target="_blank" class="btn">Portal direkt öffnen</a>
        </div>
    </div>

    <script>
        // Prüft nach 3 Sekunden, ob das IFrame geladen wurde
        // Falls Safari blockiert, zeigen wir den Button an
        setTimeout(function() {
            var frame = document.getElementById('app-frame');
            try {
                if (!frame.contentWindow || frame.contentWindow.length === 0) {
                    // Zeige Fix an, falls das Frame leer scheint
                    // Hinweis: Wegen Cross-Origin Sicherheitsregeln ist dies nur ein Indikator
                }
            } catch (e) {
                // Bei Safari-Blockade wird oft ein Fehler geworfen
                console.log("Safari-Blockade erkannt");
            }
        }, 3000);
        
        // Falls du "Cross-Site Tracking verhindern" am iPhone an hast, 
        // ist der Button die einzige saubere Lösung.
    </script>

</body>
</html>
